---
import YouTubeVideo from './YouTubeVideo.astro';
export interface Props {
	id: string;
	title: string;
	videoId?: string;
	posterQuality?:
		| 'default'
		| 'mqdefault'
		| 'hqdefault'
		| 'sddefault'
		| 'maxresdefault';
}
const { title, videoId, id, posterQuality = 'maxresdefault' } = Astro.props;
---

<style>
	.bi-play-circle {
		width: 3rem;
		height: 3rem;
		color: var(--color-secondary);
	}
</style>
<div class="learn-more d-flex align-items-center mt-auto">
	{
		videoId && (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				fill="currentColor"
				class="bi bi-play-circle"
				viewBox="0 0 16 16"
			>
				<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
				<path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445" />
			</svg>
		)
	}
	<a
		role="button"
		class="text-secondary fw-bold fs-5 ms-2"
		data-bs-toggle="modal"
		data-bs-target={`#${id}`}
	>
		{videoId ? 'Learn More' : 'Coming Soon!'}
	</a>
</div>

{
	videoId && (
		<div
			class="modal fade"
			id={id}
			tabindex="-1"
			aria-labelledby={`${id}Label`}
			aria-hidden="true"
			data-bs-backdrop="false"
		>
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h1
							class="modal-title fs-5 text-primary text-uppercase"
							id={`${id}Label`}
						>
							{title}
						</h1>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						/>
					</div>
					<div class="modal-body">
						<YouTubeVideo
							videoId={videoId}
							quality={posterQuality}
						/>
					</div>
				</div>
			</div>
		</div>
	)
}

<script>
	import Modal from 'bootstrap/js/dist/modal';
</script>
